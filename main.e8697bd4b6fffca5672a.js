!function(){"use strict";var t,e={5069:function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=document.createElement(t);if(e)for(var a in e)r.setAttribute(a,e[a]);return n&&(r.innerHTML=n),r}function o(t){return 30*Math.trunc(t/30)}function i(t,e){return 30*Math.round(48*(t-12)/e)}function s(t,e){return t/30*e/48+12}function u(t){return t.toLocaleDateString().split(".").reverse().join("-")+"T"+t.toLocaleTimeString().slice(0,5)}function c(t){return"object"!=r(t)&&(t=new Date(t)),60*t.getHours()+t.getMinutes()}function l(t){return"".concat(Math.trunc(t/60),":").concat(t%60)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.widget_id,r=e.type,o=e.position_x,i=e.position_y;p(this,t),v(this,"width",void 0),v(this,"widgetId",void 0),v(this,"positionX",void 0),v(this,"positionY",void 0),v(this,"widgetType",void 0),v(this,"widgetWrapper",void 0),v(this,"widgetControl",void 0),v(this,"deleteButton",void 0),v(this,"refreshButton",void 0),v(this,"moveButton",void 0),this.widgetId=n,this.widgetType=r,this.positionX=o,this.positionY=i,this.widgetWrapper=a("div",{class:"widget-wrapper"}),this.widgetControl=a("div",{class:"widget-control"});var s=function(t,e){var n=a("div",{class:"widget-button",type:e});return n.append(t),n};this.deleteButton=s(a("div",{class:"button-icon delete"}),"delete"),this.widgetControl.append(this.deleteButton),this.refreshButton=s(a("div",{class:"button-icon refresh"}),"refresh"),this.widgetControl.append(this.refreshButton),this.moveButton=s(a("div",{class:"button-icon move"}),"move"),this.widgetControl.append(this.moveButton),this.widgetWrapper.append(this.widgetControl),this.widgetBody=a("div",{class:"widget-body"}),this.widgetWrapper.append(this.widgetBody)}var e,n,r;return e=t,(n=[{key:"superRender",value:function(){this.widgetWrapper.style.top=this.positionY+"px",this.widgetWrapper.style.left=this.positionX+"px",this.widgetWrapper.style.width=this.width}}])&&d(e.prototype,n),r&&d(e,r),t}();function h(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function g(t){return console.log("get Events \n"),[{id:Math.floor(Math.random()*Math.floor(1e3)),startTime:35,duration:15,title:"First Event",color:"Red",repeat:0,repeatCount:0},{id:Math.floor(Math.random()*Math.floor(1e3)),startTime:35,duration:80,title:"Second Event",color:"Green",repeat:0,repeatCount:0},{id:Math.floor(Math.random()*Math.floor(1e3)),startTime:1424,duration:80,title:"Third Event",color:"Blue",repeat:3,repeatCount:4},{id:Math.floor(Math.random()*Math.floor(1e3)),startTime:80,duration:80,title:"Fourth Event",color:"Purple",repeat:1,repeatCount:2},{id:Math.floor(Math.random()*Math.floor(1e3)),startTime:1400,duration:80,title:"Fifth Event",color:"Purple",repeat:1,repeatCount:2}]}function b(t){switch(console.log("put Widget \n ".concat(JSON.stringify(t.taskList))),t.widgetType){case"tasks":return{widget_id:Math.floor(Math.random()*Math.floor(1e3)),type:t.widgetType,position_x:0,position_y:0,tasks:[]};case"timer":return{widget_id:Math.floor(Math.random()*Math.floor(1e3)),type:t.widgetType,position_x:0,position_y:0}}}function m(t){console.log("post Widget \n ".concat(JSON.stringify(t.taskList)));var e={type:t.widgetType,position_x:t.positionX,position_y:t.positionY,tasks:[]};if("tasks"===t.widgetType){var n,r=h(t.taskList);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.tasks.push({state:a.state,taskBody:a.taskBody,color:a.color})}}catch(t){r.e(t)}finally{r.f()}}}function w(){return console.log("get Widgets \n"),[{widget_id:Math.floor(Math.random()*Math.floor(1e3)),type:"tasks",position_x:100,position_y:100,tasks:[{state:1,taskBody:"Privet Misha 1)",color:"#e40101"},{state:0,taskBody:"Privet Misha 2(",color:"#00eeff"}]}]}function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return M(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function W(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function I(t,e){return(I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=D(t);if(e){var a=D(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return O(this,n)}}function O(t,e){return!e||"object"!==E(e)&&"function"!=typeof e?B(t):e}function B(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I(t,e)}(i,t);var e,n,r,o=S(i);function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.widget_id,r=e.type,s=e.position_x,u=e.position_y,c=e.tasks;W(this,i),T(B(t=o.call(this,{widget_id:n,type:r,position_x:s,position_y:u})),"width","25%"),T(B(t),"taskList",[]),T(B(t),"tasksWrapper",void 0),t.taskList=c,t.widgetControl.insertAdjacentElement("afterend",a("div",{class:"widget-title"},"To-do List")),t.tasksWrapper=a("ul",{class:"tasks"}),t.newTaskInput=a("form",{class:"task  addForm"}),t.newTaskInput.append(a("input",{type:"text",placeholder:"New task",name:"taskBody",required:"required"}));var l=a("button",{type:"submit",name:"newTask"});return l.append(a("div",{class:"button-icon confirm"})),t.newTaskInput.append(l),t.widgetBody.append(t.tasksWrapper),t.widgetBody.append(t.newTaskInput),t.setWidgetBodyListeners(),t}return e=i,(n=[{key:"render",value:function(){var t=this;this.clearTasksWrapper(),this.superRender();var e,n=k(this.taskList);try{for(n.s();!(e=n.n()).done;){var r=e.value,o=a("li",{class:"task"}),i=a("input",{type:"checkbox"});r.state&&(i.checked=!0),o.append(i),o.append(a("input",{type:"text",value:r.taskBody},r.taskBody));var s=a("input",{type:"color",value:r.color});o.append(s);var u,c=k(o.childNodes);try{for(c.s();!(u=c.n()).done;)u.value.addEventListener("change",(function(){m(t)}))}catch(t){c.e(t)}finally{c.f()}this.tasksWrapper.append(o)}}catch(t){n.e(t)}finally{n.f()}}},{key:"setWidgetBodyListeners",value:function(){var t=this;this.newTaskInput.onsubmit=function(){if(t.newTaskInput.checkValidity()){var e={state:0,taskBody:t.newTaskInput.taskBody.value,color:"#adb0ff"};t.taskList.push(e),t.newTaskInput.taskBody.value="",console.log(t.newTaskInput.taskBody),t.newTaskInput.taskBody.blur(),console.log(t.newTaskInput.taskBody),m(t),t.render()}return!1}}},{key:"clearTasksWrapper",value:function(){for(;this.tasksWrapper.firstChild;)this.tasksWrapper.removeChild(this.tasksWrapper.firstChild)}},{key:"refresh",value:function(){this.taskList=[],this.render()}}])&&C(e.prototype,n),r&&C(e,r),i}(f);function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Y(t);if(e){var a=Y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return A(this,n)}}function A(t,e){return!e||"object"!==j(e)&&"function"!=typeof e?N(t):e}function N(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y(t){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function H(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var F=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(i,t);var e,n,r,o=P(i);function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.widget_id,r=e.type,s=e.position_x,u=e.position_y;R(this,i);for(var c=arguments.length,l=new Array(c>1?c-1:0),p=1;p<c;p++)l[p-1]=arguments[p];return H(N(t=o.call.apply(o,[this].concat(l))),"width","10%"),t.widgetId=n,t.widgetType=r,t.positionX=s+"px",t.positionY=u+"px",t.widgetWrapper.append(a("div",{class:"widget-title"},"Timer")),t.widgetWrapper.style.top=t.positionY,t.widgetWrapper.style.left=t.positionX,t.widgetWrapper.style.width=t.width,t.createWidgetBody(),t}return e=i,(n=[{key:"createWidgetBody",value:function(){}}])&&x(e.prototype,n),r&&x(e,r),i}(f),X=n(6594),J=n.n(X);function U(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function G(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var V=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.root,o=n.button;$(this,t),G(this,"widgetTypes",[{type:"tasks",name:"To-Do List"}]),G(this,"widgetDesk",void 0),G(this,"createWidgetButton",void 0),G(this,"widgets",void 0),G(this,"setButtonsListeners",(function(){e.createWidgetButton.addEventListener("click",(function(t){var n,r=a("div",{class:"widgets-menu-wrapper"}),o=a("div",{class:"widgets-menu"}),i=U(e.widgetTypes);try{for(i.s();!(n=i.n()).done;){var s=a("div",{class:"widgets-menu-item","data-type":"tasks"},n.value.name);o.append(s)}}catch(t){i.e(t)}finally{i.f()}r.append(o),o.addEventListener("click",(function(t){console.log(t.path[0].dataset.type),t.target.classList.contains("widgets-menu-item")&&(e.createWidget(b({widgetType:t.path[0].dataset.type})),e.removeWidgetMenu())})),document.body.append(r)}))})),this.widgetDesk=r,this.createWidgetButton=o,this.widgets=[],this.setWidgets(w()),this.setButtonsListeners()}var e,n,r;return e=t,(n=[{key:"render",value:function(){this.clearWidgets();var t,e=U(this.widgets);try{for(e.s();!(t=e.n()).done;){var n=t.value;void 0!==n&&(this.widgetDesk.append(n.widgetWrapper),n.render())}}catch(t){e.e(t)}finally{e.f()}}},{key:"setWidgets",value:function(t){var e,n=U(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.createWidget(r)}}catch(t){n.e(t)}finally{n.f()}}},{key:"clearWidgets",value:function(){for(;this.widgetDesk.firstChild;)this.widgetDesk.removeChild(this.widgetDesk.firstChild)}},{key:"createWidget",value:function(t){var e;switch(t.type){case"tasks":e=new L(t);break;case"timer":e=new F(t)}this.setWidgetsListeners(e),this.widgets.push(e),this.render()}},{key:"removeWidgetMenu",value:function(){document.body.removeChild(document.body.lastChild)}},{key:"setWidgetsListeners",value:function(t){var e=this;t.deleteButton.addEventListener("click",(function(){J()({title:"Вы точно хотите удалить Widget?",icon:"warning",buttons:["Да!","Я передумал, оставьте!"],dangerMode:!0}).then((function(n){n||(function(t){console.log("delete Widget \n ".concat(JSON.stringify(t.taskList)))}(t),console.log(e.widgets,e.widgets.indexOf(t)),e.widgets.splice(e.widgets.indexOf(t),1),e.render(),J()("Widget удален!",{icon:"success"}))}))})),t.refreshButton.addEventListener("click",(function(){J()({title:"Вы точно хотите очистить данные Widget?",icon:"warning",buttons:["Да!","Я передумал, оставьте!"],dangerMode:!0}).then((function(e){e||(t.refresh(),m(t),J()("Widget очисчен!",{icon:"success"}))}))})),t.moveButton.addEventListener("mousedown",(function(e){document.onselectstart=function(){return!1};var n=e.pageX-t.widgetWrapper.getBoundingClientRect().left-pageXOffset,r=e.pageY-t.widgetWrapper.getBoundingClientRect().top-pageYOffset;t.widgetWrapper.style.left=e.pageX-n+"px",t.widgetWrapper.style.top=e.pageY-r+"px",document.onmousemove=function(e){t.widgetWrapper.style.left=e.pageX-n+"px",t.widgetWrapper.style.top=e.pageY-r+"px"},t.moveButton.addEventListener("mouseup",(function(){document.onselectstart=function(){return!0},document.onmousemove=null,t.moveButton.onmouseup=null,t.positionX=t.widgetWrapper.getBoundingClientRect().left+pageXOffset,t.positionY=t.widgetWrapper.getBoundingClientRect().top+pageYOffset,b(t)}))})),t.moveButton.ondragstart=function(){return!1}}}])&&q(e.prototype,n),r&&q(e,r),t}();function K(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Z=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id,r=e.startTime,a=e.duration,o=e.title,i=e.color,s=e.repeat,u=e.repeatCount;K(this,t),this.eventId=n,this.startTime=r,this.duration=a,this.title=o,this.color=i,this.repeat=s,this.repeatCount=u}var e,n,r;return e=t,(n=[{key:"createEvent",value:function(){this.eventWrap=a("div",{class:"day-event",role:"button",style:"background-color: ".concat(this.color),"data-event-id":"".concat(this.eventId)}),this.eventWrap.append(a("div",{class:"event-info time"},l(this.startTime)+" - "+l(this.startTime+this.duration))),this.eventWrap.append(a("div",{class:"event-info name"},this.title)),this.setSizeAndPos.apply(this,arguments)}},{key:"setSizeAndPos",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.width,n=t.top,r=t.left,a=t.height,o=t.zIndex;e&&(this.eventWrap.style.width="".concat(e,"px")),n&&r&&(this.eventWrap.style.top="".concat(n,"px"),this.eventWrap.style.left="".concat(r,"px")),a&&(this.eventWrap.style.height="".concat(a,"px")),o&&(this.eventWrap.style.zIndex=o)}},{key:"setParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var e in t.startTime,t.duration,t.title,t.color,t.repeat,t.repeatCount,arguments[0])this[e]=arguments[0][e]}}])&&Q(e.prototype,n),r&&Q(e,r),t}();function tt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return et(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return et(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function et(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var at=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),rt(this,"repeatList",["No","Day","Week","2 Weeks","Month"]),rt(this,"colors",["Purple","Yellow","Red","Green","Blue"]),rt(this,"title",void 0),rt(this,"starts",void 0),rt(this,"ends",void 0),rt(this,"color",void 0),rt(this,"repeat",void 0),rt(this,"repeatCount",void 0),rt(this,"event",void 0),rt(this,"type",void 0),rt(this,"currentDate",void 0),rt(this,"dayEventsWrapper",void 0),rt(this,"dayEventsManagerRoot",void 0),rt(this,"eventControlWrap",void 0),rt(this,"closeButton",void 0),rt(this,"saveButton",void 0),rt(this,"deleteButton",void 0),rt(this,"eventTitleInput",void 0),rt(this,"eventColorInput",void 0),rt(this,"eventStartsInput",void 0),rt(this,"eventEndsInput",void 0),rt(this,"eventRepeatInput",void 0),rt(this,"eventRepeatCountInput",void 0),this.currentDate=e,this.dayEventsWrapper=n,this.dayEventsManagerRoot=r,this.eventControlWrap=a("div",{class:"event-control-wrapper"}),this.closeButton=a("div",{class:"event-button","data-type":"close"}),this.closeButton.append(a("span",{class:"button-icon  close"})),this.saveButton=a("div",{class:"event-button","data-type":"save"}),this.saveButton.append(a("span",{class:"button-icon save"})),this.deleteButton=a("div",{class:"event-button","data-type":"delete"}),this.deleteButton.append(a("span",{class:"button-icon delete"})),this.eventTitleInput=a("input",{class:"event-title",type:"text"}),this.eventColorInput=a("select",{id:"event-color"});var o,i=tt(this.colors);try{for(i.s();!(o=i.n()).done;){o.value;var s=a("option");this.eventColorInput.append(s)}}catch(t){i.e(t)}finally{i.f()}this.eventStartsInput=a("input",{id:"event-starts",type:"datetime-local"}),this.eventEndsInput=a("input",{id:"event-ends",type:"datetime-local"}),this.eventRepeatInput=a("select",{id:"event-repeat"});var u,c=tt(this.repeatList);try{for(c.s();!(u=c.n()).done;){u.value;var l=a("option");this.eventRepeatInput.append(l)}}catch(t){c.e(t)}finally{c.f()}this.eventRepeatCountInput=a("input",{id:"event-repeatCount",type:"number"}),this.setInputsAndSelectsListener()}var e,n,r;return e=t,(n=[{key:"render",value:function(){this.eventTitleInput.value=this.title;for(var t=0;t<this.colors.length;t++)this.eventColorInput.childNodes[t].value=this.colors[t],this.eventColorInput.childNodes[t].innerHTML=this.colors[t][0].toUpperCase()+this.colors[t].substr(1),this.colors[t]===this.color&&(this.eventColorInput.childNodes[t].selected="selected");var e=u(new Date(this.currentDate)),n=u(new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate(),23,59));this.eventStartsInput.min=e,this.eventStartsInput.max=n,this.eventStartsInput.value=u(new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate(),0,this.starts)),this.eventEndsInput.min=e,this.eventEndsInput.max=n,this.eventEndsInput.value=u(new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate(),0,this.ends));for(var r=0;r<this.repeatList.length;r++)this.eventRepeatInput.childNodes[r].value=this.repeatList.indexOf(this.repeatList[r]),this.eventRepeatInput.childNodes[r].innerHTML=this.repeatList[r],this.repeatList[r]===this.repeat&&(this.eventRepeatInput.childNodes[r].selected="selected");this.eventRepeatCountInput.min=0,this.eventRepeatCountInput.value=this.repeatCount;var o=a("div",{class:"event-input"});o.append(this.eventTitleInput);var i=a("div",{class:"event-input"});i.append(a("label",{for:"event-color"},"Color:")),i.append(this.eventColorInput);var s=a("div",{class:"event-input"});s.append(a("label",{for:"event-starts"},"Starts:")),s.append(this.eventStartsInput);var c=a("div",{class:"event-input"});c.append(a("label",{for:"event-ends"},"Ends:")),c.append(this.eventEndsInput);var l=a("div",{class:"event-input"});l.append(a("label",{for:"event-repeat"},"Repeat: ")),l.append(this.eventRepeatInput);var p=a("div",{class:"event-input"});p.append(a("label",{class:"event-repeatCount",for:"event-repeatCount"},"Repeat")),p.append(this.eventRepeatCountInput),p.append(a("label",{class:"event-repeatCount",for:"event-repeatCount"},"times")),this.eventControlWrap.append(this.deleteButton,this.saveButton,this.closeButton),this.dayEventsManagerRoot.append(this.eventControlWrap,o,i,s,c,l,p)}},{key:"setInputsAndSelectsListener",value:function(){var t=this;this.dayEventsManagerRoot.addEventListener("input",(function(e){-1!==["SELECT","INPUT"].indexOf(e.target.tagName)&&(t.dayEventsManagerRoot.dataset.type="edit"),"datetime-local"===e.target.type&&(t.eventEndsInput.min=t.eventStartsInput.value,t.eventEndsInput.value<t.eventStartsInput.value&&(t.eventEndsInput.value=t.eventStartsInput.value))}))}},{key:"getEvent",value:function(){return this.event}}])&&nt(e.prototype,n),r&&nt(e,r),t}();function ot(t){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function it(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function st(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ut(t,e){return(ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=dt(t);if(e){var a=dt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return lt(this,n)}}function lt(t,e){return!e||"object"!==ot(e)&&"function"!=typeof e?pt(t):e}function pt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dt(t){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ft=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ut(t,e)}(o,t);var e,n,r,a=ct(o);function o(t){var e;it(this,o);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return vt(pt(e=a.call.apply(a,[this].concat(r))),"title","New Event"),vt(pt(e),"starts",0),vt(pt(e),"ends",0),vt(pt(e),"color","Blue"),vt(pt(e),"repeat","No"),vt(pt(e),"type","edit"),e.eventPos=t.clientY+e.dayEventsWrapper.scrollTop-e.dayEventsWrapper.offsetTop,e.starts=i(e.eventPos,e.dayEventsWrapper.scrollHeight),e.ends=e.starts+30,e}return e=o,(n=[{key:"setEvent",value:function(){var t;this.event=new Z({id:null,startTime:c(this.eventStartsInput.value),duration:c(this.eventEndsInput.value)-c(this.eventStartsInput.value),title:this.eventTitleInput.value,color:this.eventColorInput.value,repeat:this.eventRepeatInput.value,repeatCount:this.eventRepeatCountInput.value}),this.event.eventId=(t=this.event,console.log("put Event \n ".concat(JSON.stringify(t))),t.title,t.startTime,t.duration,t.color,t.repeat,t.repeatCount,t.repeat,Math.floor(Math.random()*Math.floor(1e3)))}}])&&st(e.prototype,n),r&&st(e,r),o}(at);function ht(t){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bt(t,e){return(bt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kt(t);if(e){var a=kt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return wt(this,n)}}function wt(t,e){return!e||"object"!==ht(e)&&"function"!=typeof e?Et(t):e}function Et(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kt(t){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Wt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bt(t,e)}(o,t);var e,n,r,a=mt(o);function o(t){var e;yt(this,o);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Mt(Et(e=a.call.apply(a,[this].concat(r))),"type","saved"),e.event=t,e.title=e.event.title,e.starts=e.event.startTime,e.ends=e.starts+e.event.duration,e.color=e.event.color,e.repeat=e.event.repeat,e.repeatCount=e.event.repeatCount,e}return e=o,(n=[{key:"setEvent",value:function(){var t;this.event.setParams({startTime:c(this.eventStartsInput.value),duration:c(this.eventEndsInput.value)-c(this.eventStartsInput.value),title:this.eventTitleInput.value,color:this.eventColorInput.value,repeat:this.eventRepeatInput.value,repeatCount:this.eventRepeatCountInput.value}),t=this.event,console.log("push Event \n ".concat(JSON.stringify(t))),t.title,t.startTime,t.duration,t.color,t.repeat,t.repeatCount,t.repeat}}])&&gt(e.prototype,n),r&&gt(e,r),o}(at);function Ct(t,e,n){return(Ct=It()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var a=new(Function.bind.apply(t,r));return n&&St(a,n.prototype),a}).apply(null,arguments)}function It(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function St(t,e){return(St=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ot(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Bt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Dt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var jt=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.wrapper,a=n.button,o=n.context;Dt(this,t),Lt(this,"eventsStructure",{}),Lt(this,"dayEventsWrapper",void 0),Lt(this,"calendar",void 0),Lt(this,"eventsManager",void 0),Lt(this,"clickDayEventsManager",(function(t){})),this.dayEventsWrapper=r,this.calendar=o,this.createEventButton=a,this.createEventButton.addEventListener("click",(function(t){e.createEventsManager(1,t,e.calendar.getCurrentDate(),e.dayEventsWrapper)})),this.setEventsStructure(g(this.calendar.getCurrentDate())),this.setClickListenerDayEvents()}var e,n,r;return e=t,(n=[{key:"render",value:function(){for(var t in this.clearDayEvents(),this.eventsStructure)this.setEventsParams(t)}},{key:"setEventsParams",value:function(t){var e,n=this.eventsStructure[t],r=Ot(n);try{for(r.s();!(e=r.n()).done;){var a=e.value,i=(this.dayEventsWrapper.offsetWidth-72-8*(n.length-1))/n.length,u=s(o(a.startTime),this.dayEventsWrapper.scrollHeight),c=n.indexOf(a)*(i+8)+51,l=Math.max(Math.min(s(a.duration,this.dayEventsWrapper.scrollHeight),s(1440-a.startTime,this.dayEventsWrapper.scrollHeight)),this.dayEventsWrapper.scrollHeight/48),p=Math.trunc(a.startTime/15).toString();a.createEvent({width:i,top:u,left:c,height:l,zIndex:p}),this.dayEventsWrapper.append(a.eventWrap)}}catch(t){r.e(t)}finally{r.f()}}},{key:"setEventsStructure",value:function(t){var e,n=Ot(t);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=o((r=new Z(r)).startTime);void 0===this.eventsStructure[a]&&(this.eventsStructure[a]=[]),this.eventsStructure[a].push(r)}}catch(t){n.e(t)}finally{n.f()}}},{key:"deleteEvent",value:function(t){var e=o(t.startTime);void 0!==this.eventsStructure[e]&&this.eventsStructure[e].pop(t)}},{key:"getEvent",value:function(t){var e,n=Ot(this.eventsStructure[i(parseInt(t.style.top.slice(0,-2)),this.dayEventsWrapper.scrollHeight)]);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.eventId===parseInt(t.dataset.eventId))return r}}catch(t){n.e(t)}finally{n.f()}}},{key:"clearDayEvents",value:function(){for(;this.dayEventsWrapper.children.length>1;)this.dayEventsWrapper.removeChild(this.dayEventsWrapper.lastChild)}},{key:"createEventsManager",value:function(t){this.dayEventsWrapper.style.overflowY="hidden";var e=a("div",{class:"events-manager","data-type":this.type,style:"top: ".concat(this.dayEventsWrapper.scrollTop+60,"px")});this.dayEventsWrapper.insertBefore(e,this.dayEventsWrapper.firstChild);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];switch(t){case 0:this.eventsManager=Ct(Wt,r.concat([e]));break;case 1:this.eventsManager=Ct(ft,r.concat([e]))}this.eventsManager.render()}},{key:"removeEventsManager",value:function(){this.dayEventsWrapper.removeChild(this.dayEventsWrapper.firstChild),this.dayEventsWrapper.style.overflowY="scroll",this.eventsManager=null,this.render()}},{key:"saveEventsManager",value:function(){this.eventsManager instanceof ft&&(this.eventsManager.setEvent(),this.setEventsStructure([this.eventsManager.getEvent()])),this.eventsManager instanceof Wt&&(this.deleteEvent(this.eventsManager.getEvent()),this.eventsManager.setEvent(),this.setEventsStructure([this.eventsManager.getEvent()])),this.eventsManager.dayEventsManagerRoot.dataset.type="saved",this.removeEventsManager(),J()("Event сохранен!",{icon:"success"})}},{key:"deleteEventsManager",value:function(){var t=this;J()({title:"Вы точно хотите удалить Event?",icon:"warning",buttons:["Да","Нет"],dangerMode:!0}).then((function(e){var n;e||(t.eventsManager.event&&(t.deleteEvent(t.eventsManager.event),n=t.eventsManager.event,console.log("delete Event \n ".concat(JSON.stringify(n)))),t.removeEventsManager(),J()("Event удален!",{icon:"success"}))}))}},{key:"closeEventsManager",value:function(){var t=this;"edit"===this.eventsManager.dayEventsManagerRoot.dataset.type?J()({title:"Продолжить без сохранения?",text:"Вы не сохранили изменения для Event!",icon:"warning",buttons:["Отменить изменения","Сохранить"],dangerMode:!0}).then((function(e){e?t.saveEventsManager():t.removeEventsManager()})):this.removeEventsManager()}},{key:"setClickListenerDayEvents",value:function(){var t=this;this.dayEventsWrapper.addEventListener("click",(function(e){if(null==t.eventsManager)e.target.classList.contains("day-event")?t.createEventsManager(0,t.getEvent(e.target),t.calendar.getCurrentDate(),t.dayEventsWrapper):t.createEventsManager(1,e,t.calendar.getCurrentDate(),t.dayEventsWrapper);else{if(t.eventsManagerInList(e.path)){if(e.target.classList.contains("event-button"))switch(e.target.dataset.type){case"delete":t.deleteEventsManager();break;case"save":t.saveEventsManager();break;case"close":t.closeEventsManager()}return}t.closeEventsManager()}}))}},{key:"eventsManagerInList",value:function(t){var e,n=Ot(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.classList&&r.classList.contains("events-manager"))return!0}}catch(t){n.e(t)}finally{n.f()}return!1}}])&&Tt(e.prototype,n),r&&Tt(e,r),t}();function Rt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Pt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.root,r=e.button;Rt(this,t),_t(this,"months",["January","February","March","April","May","June","July","August","September","October","November","December"]),_t(this,"currentDate",void 0),_t(this,"dayEvents",void 0),_t(this,"calendarSection",void 0),_t(this,"calendarDateWrapper",void 0),_t(this,"buttonList",void 0),_t(this,"calendarMonth",void 0),_t(this,"calendarBody",void 0),_t(this,"dayEventsWrapper",void 0),this.currentDate=new Date,this.calendarSection=n,this.calendarSection.innerHTML='<div class="day-wrapper">\n                <div class="day-info-wrapper" id = \'day-info-wrapper\'>\n                    <div class="control-buttons-wrapper" id="control-buttons-wrapper">\n                       \n                    </div>\n                </div>\n                <div class="calendar-wrapper" id="calendar-wrapper">\n                    <div class="calendar" role="grid" id="calendar">\n                        <div class="calendar-week" role="row">\n                            <span class="calendar-cell day-type" role="columnheader">Mo</span>\n                            <span class="calendar-cell day-type" role="columnheader">Tu</span>\n                            <span class="calendar-cell day-type" role="columnheader">We</span>\n                            <span class="calendar-cell day-type" role="columnheader">Th</span>\n                            <span class="calendar-cell day-type" role="columnheader">Fr</span>\n                            <span class="calendar-cell day-type" role="columnheader">Sa</span>\n                            <span class="calendar-cell day-type" role="columnheader">Su</span>\n                        </div>\n                    </div>\n                </div>\n            </div>',this.calendarDateWrapper=a("div",{class:"day-date"}),document.getElementById("day-info-wrapper").insertAdjacentElement("afterbegin",this.calendarDateWrapper);var o=function(t){var e=a("div",{class:"calendar-button ".concat(t?"left":"right"),role:"button","data-direction":t?-1:1});return e.innerHTML='<span class="button-icon calendar"></span>',e};this.buttonList=[o(!0),o(!1)],this.calendarMonth=a("div",{class:"calendar-month"}),this.calendarNav=a("div",{class:"calendar-nav"}),this.calendarNav.append(this.buttonList[0],this.calendarMonth,this.buttonList[1]),document.getElementById("calendar-wrapper").insertAdjacentElement("afterbegin",this.calendarNav),this.createWidgetButton=a("div",{class:"control-button",role:"button"}),this.createWidgetButton.append(a("span",{class:"button-icon create-widget"})),this.createEventButton=a("div",{class:"control-button",role:"button"}),this.createEventButton.append(a("span",{class:"button-icon create-event"})),document.getElementById("control-buttons-wrapper").append(this.createWidgetButton,this.createEventButton);for(var i=function(t){var e=a("div",{class:"day-time-line"});return e.innerHTML='<span class="day-time">'.concat(t||"","</span>"),e},s=[],u=0;u<24;u++)s.push(i("".concat(u>10?u:"0"+u,":00")),i());var c=a("div",{class:"day-events-time"});c.append.apply(c,s),this.dayEventsWrapper=a("div",{class:"day-events-wrapper",role:"presentation"}),this.dayEventsWrapper.append(c),this.calendarBody=a("div",{class:"calendar-body",role:"rowgroup"}),document.getElementById("calendar").append(this.calendarBody),this.calendarSection.append(this.dayEventsWrapper),this.dayEvents=new jt({wrapper:this.dayEventsWrapper,button:r,context:this}),this.setButtonsListeners(),this.setDaysListeners()}var e,n,r;return e=t,(n=[{key:"render",value:function(){this.clearCalendar(),this.createCalendar(),this.setCalendarDate(),this.dayEvents.render()}},{key:"setCalendarDate",value:function(){this.calendarDateWrapper.innerHTML="".concat(this.months[this.currentDate.getMonth()]," ").concat(this.currentDate.getDate(),",<br>").concat(this.currentDate.getFullYear()),this.calendarMonth.innerHTML="".concat(this.months[this.currentDate.getMonth()])}},{key:"setButtonsListeners",value:function(){var t=this;this.calendarNav.addEventListener("click",(function(e){e.target.classList.contains("calendar-button")&&t.changeMonth(parseFloat(e.target.dataset.direction),0)})),this.createEventButton.addEventListener("click",(function(e){t.dayEvents.eventsManager?J()("Завершите работу с открытым event!",{icon:"warning"}):t.dayEvents.createEventsManager(1,e,t.getCurrentDate(),t.dayEvents.dayEventsWrapper)}))}},{key:"changeMonth",value:function(t,e){if(0===e&&(e=this.currentDate.getDate()),0!==t){var n=e;switch(t){case-1:n=this.prevLastDay().getDate();break;case 1:n=this.nextLastDay().getDate()}e=Math.min(e,n),n>this.lastDay().getDate()?(this.currentDate.setMonth(this.currentDate.getMonth()+t),this.currentDate.setDate(n)):(this.currentDate.setDate(e),this.currentDate.setMonth(this.currentDate.getMonth()+t))}else this.currentDate.setDate(e);this.render()}},{key:"createCell",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=a("div",{class:"calendar-cell day ".concat(n),role:"gridcell"});return r.append(a("span",{class:"calendar-day","data-direction":e},t)),r}},{key:"prevLastDay",value:function(){return new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),0)}},{key:"nextLastDay",value:function(){return new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()+2,0)}},{key:"lastDay",value:function(){return new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()+1,0)}},{key:"createCalendar",value:function(){for(var t=a("div",{class:"calendar-week",role:"row"}),e=this.lastDay(),n=this.prevLastDay(),r=n.getDay()-1;r>=0;r--)t.append(this.createCell(n.getDate()-r,"-1","other-month"));for(var o=1;o<=e.getDate();o++)7===t.children.length&&(this.calendarBody.append(t),t=a("div",{class:"calendar-week",role:"row"})),t.append(o===this.currentDate.getDate()?this.createCell(o,"0","chosen"):this.createCell(o,"0"));for(var i=1;i<=7-e.getDay();i++)7===t.children.length&&(this.calendarBody.append(t),t=a("div",{class:"calendar-week",role:"row"})),t.append(this.createCell(i,"1","other-month"));if(4===this.calendarBody.children.length)for(var s=1;s<=7;s++)7===t.children.length&&(this.calendarBody.append(t),t=a("div",{class:"calendar-week",role:"row"})),t.append(this.createCell(7-e.getDay()+s,"1","other-month"));this.calendarBody.append(t)}},{key:"getCurrentDate",value:function(){return this.currentDate}},{key:"clearCalendar",value:function(){for(;this.calendarBody.firstChild;)this.calendarBody.removeChild(this.calendarBody.lastChild)}},{key:"setDaysListeners",value:function(){var t=this;this.calendarBody.addEventListener("click",(function(e){var n=e.target.firstChild;t.changeMonth(parseFloat(n.dataset.direction),parseInt(n.innerHTML))}))}}])&&xt(e.prototype,n),r&&xt(e,r),t}();function At(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Nt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Yt=a("div",{class:"control-button",role:"button"});Yt.innerHTML='<span class="button-icon create-event"></span>';var Ht=new Pt({root:document.getElementById("calendar-root"),button:Yt});a("div",{class:"control-button",role:"button"}).innerHTML='<span class="button-icon create-widget"></span>';var Ft=new V({root:document.getElementById("widgets-root"),button:Ht.createWidgetButton});window.onload=function(){!function(){var t,e=At((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).elements);try{for(e.s();!(t=e.n()).done;){t.value.render()}}catch(t){e.e(t)}finally{e.f()}}({elements:[Ft,Ht]})},window.addEventListener("resize",(function(){console.log("resize")}))}},n={};function r(t){var a=n[t];if(void 0!==a)return a.exports;var o=n[t]={exports:{}};return e[t].call(o.exports,o,o.exports,r),o.exports}r.m=e,t=[],r.O=function(e,n,a,o){if(!n){var i=1/0;for(c=0;c<t.length;c++){n=t[c][0],a=t[c][1],o=t[c][2];for(var s=!0,u=0;u<n.length;u++)(!1&o||i>=o)&&Object.keys(r.O).every((function(t){return r.O[t](n[u])}))?n.splice(u--,1):(s=!1,o<i&&(i=o));s&&(t.splice(c--,1),e=a())}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[n,a,o]},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t={179:0};r.O.j=function(e){return 0===t[e]};var e=function(e,n){var a,o,i=n[0],s=n[1],u=n[2],c=0;for(a in s)r.o(s,a)&&(r.m[a]=s[a]);if(u)var l=u(r);for(e&&e(n);c<i.length;c++)o=i[c],r.o(t,o)&&t[o]&&t[o][0](),t[i[c]]=0;return r.O(l)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}(),r.O(void 0,[831],(function(){return r(1202)}));var a=r.O(void 0,[831],(function(){return r(5069)}));a=r.O(a)}();
//# sourceMappingURL=main.e8697bd4b6fffca5672a.js.map